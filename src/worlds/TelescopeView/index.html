<html>
  <head>
    <meta charset="utf-8">

    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>

    <!-- add your custom scripts here -->
  </head>
  <body>

    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties>
      <a-assets>
        <!-- add your assets here. Note that you can use relative links or absolute paths to your world -->
        <!-- credit: HDRMaps @ https://hdrmaps.com/above-the-clouds/ -->
        <img id='skyMap' src='assets/textures/earth_lowres.jpg' crossorigin="anonymous">
        <img id='earth_jpg' src='assets/textures/earth_cropped.jpg' crossorigin="anonymous">
        <img id='earth_lowres' src='assets/textures/earth_lowres.jpg' crossorigin="anonymous">
        <img id='outside_jpg' src='assets/textures/outside_screenshot.jpg' crossorigin="anonymous">

        <!-- credit: '1980' by Arulo - www.mixkit.com -->
        <audio id="lobbyMusic" src="assets/sounds/lobbyMusic.mp3" preload="auto" crossorigin="anonymous"></audio>
        
        <!-- VoiceOvers -- All voiceovers are generated by AI -->
        <audio id="vcAlien" src="assets/sounds/vcAlien.mp3" preload="auto" crossorigin="anonymous"></audio>
        <audio id="vcPlanet" src="assets/sounds/vcPlanet.mp3" preload="auto" crossorigin="anonymous"></audio>
        <audio id="vcGalaxy" src="assets/sounds/vcGalaxy.mp3" preload="auto" crossorigin="anonymous"></audio>
        <audio id="vcStars" src="assets/sounds/vcStars.mp3" preload="auto" crossorigin="anonymous"></audio>

        <!-- Models -->
        <!-- Credit for textures: https://www.solarsystemscope.com/textures/ -->
        <a-asset-item id="alien_gltf" src="assets/models/alien.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="galaxy_gltf" src="assets/models/galaxy.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="stars_gltf" src="assets/models/stars.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="planets_gltf" src="assets/models/planets.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        
        <a-asset-item id="viewport_gltf" src="assets/models/telescopeViewport_v03.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        
        <!-- loading navmesh. Following instructiosn from here: https://github.com/n5ro/aframe-extras/tree/master/src/pathfinding -->
        <a-asset-item id="navmesh_gltf" src="assets/models/nav_mesh_circle.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
      
        <!-- Circles' built-in assets [REQUIRED] -->
        <circles-assets/>
      </a-assets>

      <!-- Circles' built-in manager and avatar [REQUIRED] -->
      <circles-manager-avatar/>

      <!-- just creating an entity that connects many elements together -->
      <a-entity id="game_manager"></a-entity>

    <!-- Ambient Sound -->
    <a-entity position="0 0 0" circles-sound="type:music; src:#lobbyMusic; autoplay:true; loop:true; volume:0.2; state:play;"></a-entity>
    
    <!-- Space objects -->
    
    <a-entity id="alien" position="-4 1.5 3" rotation="0 127 0" scale="0.1 0.1 0.1" gltf-model="#alien_gltf"
              circles-sphere-env-map="src:#skyMap"
              circles-artefact="inspectScale:0.3 0.3 0.3; textRotationY:90.0; inspectRotation:0.0 0.0 0;
              label_on:false; descriptionLookAt:true;
              title:Alien;
              description:The James Webb telescope may detect biosignatures aka signs of alien life!;
              audio:#vcAlien; 
              volume:0.6;">
    </a-entity>

    <!-- Planets -->
    <a-entity id="planets" position="4 3.7 1.8" rotation="-5 -30 3" scale="0.05 0.05 0.05" gltf-model="#planets_gltf"
              circles-sphere-env-map="src:#skyMap"
              circles-artefact="inspectScale:0.01 0.01 0.01; textRotationY:90.0; inspectRotation:0.0 0.0 0;
              label_on:false; descriptionLookAt:true; description_offset:0 -1 0; desc_arrow_position:up;
              title:Planets;
              description:The James webb telescope will observe elements that make up planets. It will study our solar system and distant planetary systems as they are forming.;
              audio:#vcPlanet;
              volume:0.6;">
    </a-entity>

    <a-entity id="galaxy" position="-0.5 3 -6" rotation="18 0 0" scale="0.7 0.7 0.7" gltf-model="#galaxy_gltf"
              circles-sphere-env-map="src:#skyMap"
              circles-artefact="inspectScale:0.5 0.5 0.5; textRotationY:90.0; inspectRotation:0.0 0.0 0;
              label_on:false; descriptionLookAt:true;
              title:Galaxy;
              description:The James Webb telescope will observe distant galaxies as they are forming, and the first galaxies formed after the Big Bang.;
              audio:#vcGalaxy;
              volume:0.6;">
    </a-entity>

    <a-entity id="stars" position="-1.8 4 5.8" rotation="-5 -51 2" scale="0.3 0.3 0.3" gltf-model="#stars_gltf"
              circles-sphere-env-map="src:#skyMap"
              circles-artefact="inspectScale:0.2 0.2 0.2; textRotationY:90.0; inspectRotation:0.0 0.0 0;
              label_on:false; descriptionLookAt:true; description_offset:0 -1 0; desc_arrow_position:up;
              title:Stars;
              description:The James Webb Telescope will observe and capture images of previously unseen stages of a star's life cycle, and search for the first stars created after the Big Bang.;
              audio:#vcStars;
              volume:0.6;">
    </a-entity>

    <a-entity id="viewport" position="0 1 0" rotation="0 0 0" scale="0.6 0.6 0.6" gltf-model="#viewport_gltf"></a-entity>
    
    <!-- Portal -->
    <a-entity id="portal-outside" position="-2.6 2.3 -0.4" rotation="0 10 0" scale="0.5 0.5 0.5" circles-portal="img_src:#outside_jpg; title_text:Return; link_url:/w/Outside"></a-entity>
     
    <!-- Nav mesh -->
    <a-entity id="nav-mesh-telescope" gltf-model="#navmesh_gltf" visible='false' nav-mesh position="0 1 0"></a-entity>

    <!-- Lights -->
    <a-entity id="center_light" position="0 3.4 0" light="type:point; color:#FFFFFF; intensity:2.5; decay:0.83;"></a-entity> 

    <a-entity id='spaceBox'
              rotation='0 200 0'
              geometry='primitive:sphere; radius:100; segments-height:24; segments-width:24;'
              material='shader:flat; src:#earth_jpg; side:back;'>
    </a-entity>

    </a-scene>
    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
    
  </body>
</html>
