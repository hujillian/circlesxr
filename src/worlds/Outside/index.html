<html>
  <head>
    <meta charset="utf-8">

    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>

    <!-- add your custom scripts here -->
    <!-- <script src="/worlds/hub/scripts/hub.js"></script> -->

    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
  </head>
  <body>

    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties>
      <a-assets>
        <!-- add your assets here. Note that you can use relative links or absolute paths to your world -->
        <!-- credit: HDRMaps @ https://hdrmaps.com/above-the-clouds/ -->
        <img id='skyMap' src='assets/textures/086_hdrmaps_com_free_above_clouds.jpg' crossorigin="anonymous">

        <!-- credit: "magic" music - https://soundcloud.com/royaltyfreebackgroundmusic/sets/creative-commons-music-365 -->
        <audio id="magic_music" src="assets/sounds/Magic_Music.mp3" preload="auto" crossorigin="anonymous"></audio>

        <audio id="note_c" src="assets/sounds/Note_C.mp3" preload="auto" crossorigin="anonymous"></audio>
        <audio id="note_d" src="assets/sounds/Note_D.mp3" preload="auto" crossorigin="anonymous"></audio>
        <audio id="note_e" src="assets/sounds/Note_E.mp3" preload="auto" crossorigin="anonymous"></audio>
        <audio id="note_f" src="assets/sounds/Note_F.mp3" preload="auto" crossorigin="anonymous"></audio>

        <!-- Rooms-->
        <a-asset-item id="controlRoom_gltf" src="assets/models/spaceship/controlRoom.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="departureBay_gltf" src="assets/models/spaceship/departureBay.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="diningHall_gltf" src="assets/models/spaceship/diningHall.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="engine_gltf" src="assets/models/spaceship/engine.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="lobby_gltf" src="assets/models/spaceship/lobby.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="observatory_gltf" src="assets/models/spaceship/observatory.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="wingL_gltf" src="assets/models/spaceship/wingL.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="wingR_gltf" src="assets/models/spaceship/wingR.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="controlDesk_gltf" src="assets/models/spaceship/controldesk.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="floor_gltf" src="assets/models/spaceship/floor.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        
        <!-- Doors -->
        <a-asset-item id="diningHall_L_back_gltf" src="assets/models/spaceship/doors/diningHall_L_back.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="diningHall_L_front_gltf" src="assets/models/spaceship/doors/diningHall_L_front.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="diningHall_R_back_gltf" src="assets/models/spaceship/doors/diningHall_R_back.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="diningHall_R_front_gltf" src="assets/models/spaceship/doors/diningHall_R_front.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="lobbydoor_L_back_gltf" src="assets/models/spaceship/doors/lobbydoor_L_back.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="lobbydoor_L_front_gltf" src="assets/models/spaceship/doors/lobbydoor_L_front.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="lobbydoor_R_back_gltf" src="assets/models/spaceship/doors/lobbydoor_R_back.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="lobbydoor_R_front_gltf" src="assets/models/spaceship/doors/lobbydoor_R_front.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        
        <!-- James Webb telescope -->
        <a-asset-item id="jamesWebb_gltf" src="assets/models/James_Webb_telescope/jamesWebbTelescope.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        
        <!-- Interior objects -->
        <a-asset-item id="fiveDollar_gltf" src="assets/models/interior_objects/fivedollarbill.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        
        <!-- loading navmesh. Following instructiosn from here: https://github.com/n5ro/aframe-extras/tree/master/src/pathfinding -->

        <!-- Circles' built-in assets [REQUIRED] -->
        <circles-assets/>
      </a-assets>

      <!-- Circles' built-in manager and avatar [REQUIRED] -->
      <circles-manager-avatar/>

      <!-- just creating an entity that connects many elements together -->
      <a-entity id="game_manager" lights-interactive></a-entity>

    <!-- Rooms -->
    <!-- I removed  circles-sphere-env-map="src:#skyMap" from the models because it made them too bright -->
    <a-entity id="controlRoom" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#controlRoom_gltf"></a-entity>
    <a-entity id="departureBay" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#departureBay_gltf"></a-entity>
    <a-entity id="diningHall" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#diningHall_gltf"></a-entity>
    <a-entity id="engine" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#engine_gltf"></a-entity>
    <a-entity id="lobby" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#lobby_gltf" circles-sphere-env-map="src:#skyMap"></a-entity>
    <a-entity id="observatory" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#observatory_gltf"></a-entity>
    <a-entity id="wingL" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#wingL_gltf"></a-entity>
    <a-entity id="wingR" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#wingR_gltf"></a-entity>
    <a-entity id="controlDesk" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#controlDesk_gltf"></a-entity>
    <a-entity id="floor" position="13 0.1 0" rotation="0 0 0" scale="0.98 1 0.94" gltf-model="#floor_gltf"></a-entity>

    <!-- Doors -->
    <a-entity id="diningHall_L_back" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#diningHall_L_back_gltf"></a-entity>
    <a-entity id="diningHall_L_front" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#diningHall_L_front_gltf"></a-entity>
    <a-entity id="diningHall_R_back" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#diningHall_R_back_gltf"></a-entity>
    <a-entity id="diningHall_R_front" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#diningHall_R_front_gltf"></a-entity>
    <a-entity id="lobbydoor_L_back" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#lobbydoor_L_back_gltf"></a-entity>
    <a-entity id="lobbydoor_L_front" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#lobbydoor_L_front_gltf"></a-entity>
    <a-entity id="lobbydoor_R_back" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#lobbydoor_R_back_gltf"></a-entity>
    <a-entity id="lobbydoor_R_front" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#lobbydoor_R_front_gltf"></a-entity>

    <!-- Buttons to open doors -->
    <!-- Doors between lobby and control room -->
    <a-entity   id="button_1"
                circles-button="pedastal_color:rgb(200, 200, 200);" 
                position="18.9 2.5 -4" rotation="0 0 90" scale="0.8 0.8 0.8">
    </a-entity>
    <a-entity   id="button_2"
                circles-button="pedastal_color:rgb(200, 200, 200);" 
                position="18.9 2.5 -6" rotation="0 0 90" scale="0.8 0.8 0.8">
    </a-entity>
    <!-- Doors between control room and dining hall -->
    <a-entity   id="button_3"
                circles-button="pedastal_color:rgb(200, 200, 200);" 
                position="7.9 2.5 -4" rotation="0 180 90" scale="0.8 0.8 0.8">
    </a-entity>
    <a-entity   id="button_4"
                circles-button="pedastal_color:rgb(200, 200, 200);" 
                position="7.9 2.5 -6" rotation="0 180 90" scale="0.8 0.8 0.8">
    </a-entity>

    <!-- Interior objects -->
    <a-entity id="fiveDollar" position="13 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#fiveDollar_gltf"></a-entity>

    <!-- James Webb telescope -->
    <a-entity id="jamesWebb" position="43 0 -47" rotation="0 -70 0" scale="1 1 1" gltf-model="#jamesWebb_gltf"></a-entity>

      <!-- sky and lights -->
      <a-entity id="sunlight" position="13 20 0" rotation="40 0 0" 
                light="type:directional; intensity:4; color:#d5e4f5; castShadow:false;"></a-entity>
      <!-- <a-entity light="type:hemisphere; color:#FFFFFF; groundColor:#BCE2F4; intensity:3.0"></a-entity> -->

      <a-entity id="jameswebb_light" position="29 13 -47" light="type:point; color:#FFFFFF; intensity:5; decay:0.5;"></a-entity> 

      <!-- <a-entity id='skyBox'
                rotation='0 200 0'
                geometry='primitive:sphere; radius:50; segments-height:24; segments-width:24;'
                material='shader:flat; src:#skyMap; side:back;'>
      </a-entity> -->

      <a-entity environment="preset:starry;"></a-entity>
    </a-scene>
    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
    
  </body>
</html>
