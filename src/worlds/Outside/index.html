<html>
  <head>
    <meta charset="utf-8">

    <!-- Circles' head scripts [REQUIRED] -->
    <circles-start-scripts/>

    <!-- add your custom scripts here -->
    <!-- <script src="/worlds/hub/scripts/hub.js"></script> -->

    <script src="https://unpkg.com/aframe-environment-component@1.3.2/dist/aframe-environment-component.min.js"></script>
  </head>
  <body>

    <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
    <circles-start-ui/>

    <!-- a-scene with 'circles-properties' component [REQUIRED] -->
    <a-scene circles_scene_properties>
      <a-assets>
        <!-- add your assets here. Note that you can use relative links or absolute paths to your world -->
        <!-- credit: HDRMaps @ https://hdrmaps.com/above-the-clouds/ -->
        <img id='skyMap' src='assets/textures/086_hdrmaps_com_free_above_clouds.jpg' crossorigin="anonymous">
        <img id='earth_jpg' src='assets/textures/earth_cropped.jpg' crossorigin="anonymous">
        <img id='earth_lowres' src='assets/textures/earth_lowres.jpg' crossorigin="anonymous">

        <img id="observatory_png" src="assets/models/spaceship/observatory_texture-01.png">
        <img id="telescope_jpg" src="assets/textures/telescope_screenshot.jpg">

        <!-- credit: Dark Ambient Atmosphere 2 by Danydory - https://pixabay.com/music/ambient-dark-ambient-atmosphere-2-141314/ -->
        <audio id="outdoorSound" src="assets/sounds/outdoor_sound.mp3" preload="auto" crossorigin="anonymous"></audio>

        <!-- VoiceOvers -- All voiceovers are generated by AI -->
        <audio id="vcJamesWebbTel" src="assets/sounds/vcJamesWebbTel.mp3" preload="auto" crossorigin="anonymous"></audio>

        <!-- Rooms-->
        <a-asset-item id="controlRoom_gltf" src="assets/models/spaceship/controlRoom.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="departureBay_gltf" src="assets/models/spaceship/departureBay.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="diningHall_gltf" src="assets/models/spaceship/diningHall.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="engine_gltf" src="assets/models/spaceship/engine.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="lobby_gltf" src="assets/models/spaceship/lobby.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="observatory_gltf" src="assets/models/spaceship/observatory.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="wingL_gltf" src="assets/models/spaceship/wingL.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="wingR_gltf" src="assets/models/spaceship/wing_R.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="controlDesk_gltf" src="assets/models/spaceship/controldesk.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="floor_gltf" src="assets/models/spaceship/floor.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        
        <!-- Doors -->
        <a-asset-item id="diningHall_back_gltf" src="assets/models/spaceship/doors/DiningDoor_Back.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="diningHall_front_gltf" src="assets/models/spaceship/doors/DiningDoor_Front.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="lobby_back_gltf" src="assets/models/spaceship/doors/LobbyDoor_Back.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="lobby_front_gltf" src="assets/models/spaceship/doors/LobbyDoor_Front.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
          
        <!-- James Webb telescope -->
        <a-asset-item id="jamesWebb_gltf" src="assets/models/jamesWebb.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>

        <!-- Canadarm -->
        <a-asset-item id="canadarm_gltf" src="assets/models/Canadarm.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        
        <!-- Interior objects -->
        <a-asset-item id="imaxCamera_gltf" src="assets/models/interior_objects/imaxCamera.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="satellite_gltf" src="assets/models/interior_objects/satellite.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        <a-asset-item id="toolbox_gltf" src="assets/models/interior_objects/toolbox.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
        
        <!-- loading navmesh. Following instructiosn from here: https://github.com/n5ro/aframe-extras/tree/master/src/pathfinding -->
        <a-asset-item id="navmesh_gltf" src="assets/models/nav_mesh_tilted.gltf" response-type="arraybuffer" crossorigin="anonymous"></a-asset-item>
      
        <!-- Circles' built-in assets [REQUIRED] -->
        <circles-assets/>
      </a-assets>

      <!-- Circles' built-in manager and avatar [REQUIRED] -->
      <circles-manager-avatar/>

      <!-- just creating an entity that connects many elements together -->
      <a-entity id="game_manager" lights-interactive></a-entity>

    <!-- Checkpoints -->
    <a-entity id="checkpoint-1" circles-checkpoint position="0 0 0"></a-entity> <!-- start -->
    <a-entity id="checkpoint-2" circles-checkpoint position="0.7 1 -11.2" rotation="15 0 0"></a-entity> <!-- path 1 -->
    <a-entity id="checkpoint-3" circles-checkpoint position="4.1 3.8 -22" rotation="15 0 0"></a-entity> <!-- path 2 -->
    <a-entity id="checkpoint-4" circles-checkpoint position="14.7 5.4 -25.1" rotation="0 0 15"></a-entity> <!-- telescope 1 -->
    <a-entity id="checkpoint-5" circles-checkpoint position="25.2 6 -22.7" rotation="0 0 15"></a-entity> <!-- telescope 2 -->
    <a-entity id="checkpoint-6" circles-checkpoint position="37 6 -21.6" rotation="0 0 15"></a-entity> <!-- telescope 2 -->
    <a-entity id="checkpoint-7" circles-checkpoint position="49 6 -28" rotation="0 0 15"></a-entity> <!-- telescope 3 -->
    <a-entity id="checkpoint-8" circles-checkpoint position="61.5 6 -38" rotation="0 0 15"></a-entity> <!-- telescope 4 -->
    <a-entity id="checkpoint-9" circles-checkpoint position="46 6 -50" rotation="0 0 -15"></a-entity> <!-- telescope 5 -->
    <a-entity id="checkpoint-10" circles-checkpoint position="31 6 -48" rotation="0 0 -15"></a-entity> <!-- telescope 6 -->
    <a-entity id="checkpoint-11" circles-checkpoint position="19 6 -38.5" rotation="0 0 -15"></a-entity> <!-- telescope 7 -->

    <!-- Rooms -->
    <a-entity id="controlRoom" position="9 0 10" rotation="0 0 0" scale="1 1 1" gltf-model="#controlRoom_gltf" circles-sphere-env-map="src:#earth_lowres"></a-entity>
    <a-entity id="departureBay" position="9 0 10" rotation="0 0 0" scale="1 1 1" gltf-model="#departureBay_gltf" circles-sphere-env-map="src:#earth_lowres"></a-entity>
    <a-entity id="diningHall" position="9 0 10" rotation="0 0 0" scale="1 1 1" gltf-model="#diningHall_gltf" circles-sphere-env-map="src:#earth_lowres"></a-entity>
    <a-entity id="engine" position="9 0 10" rotation="0 0 0" scale="1 1 1" gltf-model="#engine_gltf" circles-sphere-env-map="src:#earth_lowres"></a-entity>
    <a-entity id="lobby" position="9 0 10" rotation="0 0 0" scale="1 1 1" gltf-model="#lobby_gltf" circles-sphere-env-map="src:#earth_lowres"></a-entity>
    <a-entity id="observatory" position="9 0 10" rotation="0 0 0" scale="1 1 1" gltf-model="#observatory_gltf" circles-sphere-env-map="src:#earth_lowres"></a-entity>
    <a-entity id="wingL" position="9 0 10" rotation="0 0 0" scale="1 1 1" gltf-model="#wingL_gltf" circles-sphere-env-map="src:#earth_lowres"></a-entity>
    <a-entity id="wingR" position="9 0 10" rotation="0 0 0" scale="1 1 1" gltf-model="#wingR_gltf" circles-sphere-env-map="src:#earth_lowres"></a-entity>
    <a-entity id="controlDesk" position="9 0 10" rotation="0 0 0" scale="1 1 1" gltf-model="#controlDesk_gltf"></a-entity>
    <a-entity id="floor" position="9 0.1 10" rotation="0 0 0" scale="1 1 1" gltf-model="#floor_gltf"></a-entity>

    <!-- Doors -->
    <a-entity id="diningHall_front" position="9 0 10" rotation="0 0 0" scale="1 1 1" gltf-model="#diningHall_front_gltf"></a-entity>
    <a-entity id="lobby_front" position="9 0 10" rotation="0 0 0" scale="1 1 1" gltf-model="#lobby_front_gltf"></a-entity>

    <!-- Interior objects -->
    <a-entity id="imaxCamera" position="13.8 5.3 -2.1" rotation="15 -20 0" scale="1 1 1" gltf-model="#imaxCamera_gltf"></a-entity>
    <a-entity id="satellite" position="6 5 -0.4" rotation="110 50 0" scale="1 1 1" gltf-model="#satellite_gltf"></a-entity>
    <a-entity id="toolbox" position="10 0.3 -1.6" rotation="0 180 0" scale="1 1 1" gltf-model="#toolbox_gltf"></a-entity>
    
    <!-- James Webb telescope -->
    <a-entity id="jamesWebb" position="39 0 -37" rotation="0 -70 0" scale="1 1 1" gltf-model="#jamesWebb_gltf" circles-sphere-env-map="src:#earth_lowres"></a-entity>
    <a-entity id="jameswebb-description-light" position="16.3 7.5 -24.5" light="type:point; color:#FFFFFF; intensity:1.5; decay:0.04;"></a-entity> 
    <a-entity id="jameswebb-description" position="17.6 6.5 -24.5" rotation="-30 -98 0" scale="1 1 1">
      <a-entity geometry="primitive:box; width:3.0; height:1.2; depth:0.2;" material="color:white;" position="0 0 -0.11" circles-sphere-env-map="src:#earth_lowres"></a-entity>
      <a-entity geometry="primitive:box; width:0.5; height:1.0; depth:0.5;" material="color:white;" position="0 -0.78 -0.53" rotation="35 0 0" circles-sphere-env-map="src:#earth_lowres"></a-entity>

      <!-- text documentation: https://github.com/aframevr/aframe/blob/master/docs/components/text.md -->
      <a-entity text="value:James Webb Space Telescope; 
                      color:black; font:exo2bold; width:2.8; anchor:left; baseline:top; wrapCount:26;" 
                      position="-1.4 0.5 0.01" >
                    </a-entity>
      <a-entity text="value:The James Webb telescope is currently the most powerful space telescope.  It is a collaboration between NASA, the European Space Agency, and the Canadian Space Agency.;
                      color:black; font:roboto; width:2.8; anchor:left; baseline:top; wrapCount:38;" 
                      position="-1.4 0.2 0.01">
                    </a-entity>
    </a-entity>

    <!-- Canadarm -->
    <a-entity id="canadarm" position="0 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#canadarm_gltf" circles-sphere-env-map="src:#earth_lowres"></a-entity>
    
    <!-- Portal -->
    <a-entity id="portal-inside" position="1.4 2.5 3" rotation="0 105 0" circles-portal="img_src:#observatory_png; title_text:Go Inside; link_url:/w/Orbits"></a-entity>
    <a-entity id="portal-telescope" position="41.3 6.7 -30" rotation="0 -115 0" circles-portal="img_src:#telescope_jpg; title_text:View Telescope; link_url:/w/TelescopeView"></a-entity>
    
    <!-- Audio Manager -->
    <a-entity position="0 0 0" circles-sound="type:music; src:#outdoorSound; autoplay:true; loop:true; volume:0.2; state:play;"></a-entity>

    <!-- sky and lights -->
    <!-- <a-entity id="sunlight" position="13 20 0" rotation="40 0 0" 
              light="type:directional; intensity:4; color:#d5e4f5; castShadow:false;"></a-entity> -->
    <!-- <a-entity light="type:hemisphere; color:#FFFFFF; groundColor:#BCE2F4; intensity:3.0"></a-entity> -->

    <!-- Nav mesh -->
    <a-entity id="nav-mesh" gltf-model="#navmesh_gltf" visible='false' nav-mesh position="0 1 0"></a-entity>

    <a-entity id="jameswebb_light" position="25 16 -37" light="type:point; color:#FFFFFF; intensity:5; decay:0.3;"></a-entity> 

    <a-entity id='spaceBox'
              rotation='0 200 0'
              geometry='primitive:sphere; radius:100; segments-height:24; segments-width:24;'
              material='shader:flat; src:#earth_jpg; side:back;'>
    </a-entity>

    </a-scene>
    <!-- Circles' end scripts [REQUIRED] -->
    <circles-end-scripts/>
    
  </body>
</html>
